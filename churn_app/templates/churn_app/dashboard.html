{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Customer Churn Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body.dark-mode {
      background-color: #121212;
      color: #e0e0e0;
    }

    body.dark-mode .bg-white {
      background-color: #1e1e1e !important;
      color: #e0e0e0;
    }

    img.visual {
      max-width: 100%;
      height: auto;
      margin-bottom: 1rem;
      border-radius: 8px;
      box-shadow: 0 0 6px rgba(0,0,0,0.2);
    }

    .navbar-dark .navbar-nav .nav-link.active {
      font-weight: bold;
      color: #00ffd5 !important;
    }

    #backToTop {
      position: fixed;
      bottom: 25px;
      right: 25px;
      z-index: 1000;
    }

    summary {
      cursor: pointer;
      font-weight: 600;
      font-size: 1.1rem;
    }
  </style>
</head>
<body class="bg-light">

<!-- âœ… Navigation Menu -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow">
  <div class="container-fluid">
    <a class="navbar-brand" href="{% url 'churn_dashboard' %}">ğŸ“Š Churn Insights</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto">
        <li class="nav-item">
          <a class="nav-link" href="{% url 'churn_predict' %}">ğŸ  Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="{% url 'churn_dashboard' %}">ğŸ“ˆ Dashboard</a>
        </li>
      </ul>
      <button onclick="toggleTheme()" class="btn btn-outline-light btn-sm">ğŸŒ— Toggle Theme</button>
    </div>
  </div>
</nav>

<!-- âœ… Dashboard -->
<div class="container mt-4 mb-5 bg-white p-4 rounded shadow">
  <h4 class="mb-4">ğŸ“Š Customer Churn - Visual Dashboard</h4>

  <!-- ğŸ”½ EDA Section -->
  <details open>
    <summary>Exploratory Data Analysis (EDA)</summary>
    <hr>
    <img src="{% static 'images/Churn_Distribution.JPEG' %}" class="visual" alt="Churn Distribution">
    <img src="{% static 'images/Churn_vs_contract_type.JPEG' %}" class="visual" alt="Churn vs Contract Type">
    <img src="{% static 'images/Churn_vs_Internet_service.JPEG' %}" class="visual" alt="Churn vs Internet Service">
    <img src="{% static 'images/Churn_vs_Monthly_charges.JPEG' %}" class="visual" alt="Churn vs Monthly Charges">
    <img src="{% static 'images/Monthly_sales.JPEG' %}" class="visual" alt="Monthly Sales">
  </details>

  <!-- ğŸ”½ ROC Section -->
  <details class="mt-4">
    <summary>Model ROC Curves</summary>
    <hr>
    <img src="{% static 'images/Random_forest_ROC_curve.JPEG' %}" class="visual" alt="Random Forest ROC">
    <img src="{% static 'images/Logistic_regression_ROC_curve.JPEG' %}" class="visual" alt="Logistic Regression ROC">
    <img src="{% static 'images/Decision_tree_ROC_curve.JPEG' %}" class="visual" alt="Decision Tree ROC">
    <img src="{% static 'images/XGBoost_ROC_curve.JPEG' %}" class="visual" alt="XGBoost ROC">
    <img src="{% static 'images/ANN_ROC_curve.JPEG' %}" class="visual" alt="ANN ROC">
  </details>

  <!-- ğŸ”½ Model Performance -->
  <details class="mt-4">
    <summary>Model Performance Comparison</summary>
    <hr>
    <img src="{% static 'images/model_performance_comparison.jpeg' %}" class="visual" alt="Model Performance">
  </details>

  <!-- ğŸ”½ Buttons -->
  <div class="mt-4 d-flex justify-content-between flex-wrap">
    <a href="{% url 'churn_predict' %}" class="btn btn-outline-primary">ğŸ”™ Back to Prediction</a>
    <button onclick="window.print()" class="btn btn-success">â¬‡ï¸ Download PDF</button>
  </div>
</div>

<!-- âœ… Back to Top -->
<button onclick="scrollToTop()" id="backToTop" class="btn btn-danger btn-sm rounded-circle">
  â¬†ï¸
</button>

<!-- âœ… Scripts -->
<script>
  function toggleTheme() {
    document.body.classList.toggle('dark-mode');
  }

  function scrollToTop() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>